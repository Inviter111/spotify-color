<!DOCTYPE html>
<html>
    <body id="body">
        
    </body>
    <script type="application/javascript">
        async function loadImage() {
            const res = await fetch('http://localhost:8080/imageColor').then((res) => res.json())
            console.log(res)

            const body = document.querySelector("body")
            const img = createImage(res)
            body.appendChild(img)
            body.style.backgroundColor = `#${res.hex}`
            body.style.transition = 'background-color 1s'
            body.style.fontFamily = '"Raleway script=all rev=1", "Adobe Blank"'
            setTimeout(update, 500)
        }

        function createImage(res) {
            // const div = document.createElement('div')
            const img = document.createElement("img")
            img.src = res.url
            img.style.position = 'absolute'
            img.style.margin = 'auto'
            img.style.left = 0
            img.style.right = 0
            img.style.top = 0
            img.style.bottom = 0
            img.style.boxShadow = '6px 6px 10px rgba(0, 0, 0, 0.3)'
            img.tagName = 'image'
            // const songName = document.createElement('span')
            // songName.style.fontWeight = 900
            // songName.style.fontStyle = 'normal'
            // songName.style.fontSize = '40px'
            // songName.innerText = 'Black'
            // div.appendChild(img)
            // div.appendChild(songName)
            return img
        }

        async function update() {
            const res = await fetch('http://localhost:8080/imageColor').then((res) => res.json())
            const body = document.querySelector('body')
            const img = document.querySelector('img')
            img.src = res.url
            body.style.backgroundColor = `#${res.hex}`
            setTimeout(update, 500)
        }

        loadImage()
    </script>
</html>